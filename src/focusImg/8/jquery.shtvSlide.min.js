$.fn.focusImg.Register("fi08",{init:function(fi){fi.ptStepY_=fi.ptStepY_||20;fi.ptStepY=fi.ptStepY||160;fi.ptStepY1=fi._cfg.ptStepY1||50;fi.speed1=fi._cfg.speed1||200;fi.yRolling=fi._cfg.yRolling||false;fi._$tabC=fi.$d.find(".fi_tab");fi._$transparentOvl=fi.$d.find(".fi_ovl").css("opacity",fi._cfg.opacity||0.5);fi._$list=fi._$tabC.find("ul");fi._$tabs=fi._$list.find("li");fi._tabNum=fi._$tabs.length;fi._$list1=fi.$d.find(".fi_note ul");fi._$list1.find("li").each(function(i,o){$(o).data("id",i);});fi._$btnL=fi._$tabC.find(".fi_left a");fi._$btnR=fi._$tabC.find(".fi_right a");fi._$img=fi.$d.find(".fi_player");fi.ptStepX=fi._$tabs.eq(0).width();fi._$list.css("width",fi.ptStepX*fi._tabNum);fi._cfg.displayNum=fi._cfg.displayNum||4;fi._$btnR.addClass("fi_btn_on");fi._$btnL.addClass("fi_btn_off");fi._$tabC.find("img").css("opacity",fi._cfg.opacity||0.5);},initEvts:function(fi,gogo){var _this=this;fi._$tabC.find("a").click(function(e){this.blur();e.preventDefault();return true;});fi._$btnL.mousedown(function(){var s=fi._$tabs.index(fi._$tabs.filter(".now")[0]);if((s==0)||fi._$list.is(":animated")||$(this).hasClass("fi_btn_off"))return;clearInterval(fi.autoPlay);clearTimeout(fi.autoPlay1);_this.alt(fi,s-1,function(){fi.autoPlay1=window.setTimeout(function(){gogo(s);},fi.speed);});});fi._$btnR.mousedown(function(){var s=fi._$tabs.index(fi._$tabs.filter(".now")[0]);if((s==fi._tabNum-1)||fi._$list.is(":animated")||$(this).hasClass("fi_btn_off"))return;clearInterval(fi.autoPlay);clearTimeout(fi.autoPlay1);_this.alt(fi,s+1,function(){fi.autoPlay1=window.setTimeout(function(){s=(s+2)==fi._tabNum?0:(s+2);gogo(s);},fi.speed);});});fi.$d.find(".fi_player_c").click(function(e){window.open(fi._curLink);});},roll:function(fi,i){var i1=0;var liNow=$.grep(fi._$list1.find("li"),function(o,j){if($(o).data("id")==i){i1=j;return true;};return false;});if(i1==0)return;var step=fi.ptStepY+(i1-1)*fi.ptStepY1+i1*fi.ptStepY_;liNow=$(liNow);var $prev=liNow.prevAll();if(fi.yRolling){for(var k=$prev.length-1;k>=0;k--){fi._$list1.append($prev.eq(k).clone(true).removeClass("fi_note_on").height(fi.ptStepY1));};fi._$list1.stop(true,true).animate({top:-step},fi.speed1,function(){$prev.remove();fi._$list1.css("top",0);liNow.addClass("fi_note_on").css("height",fi.ptStepY);});}else{fi._$list1.css("top",-step);for(var k=$prev.length-1;k>=0;k--){fi._$list1.append($prev.eq(k).removeClass("fi_note_on").height(fi.ptStepY1));};fi._$list1.css("top",0);liNow.addClass("fi_note_on").height(fi.ptStepY);};},tabOffset:function(fi,i){var r={visible:false};r.val=(i+1)*fi.ptStepX+fi._$list.position().left;if(r.val>0&&r.val<=fi._cfg.displayNum*fi.ptStepX){r.visible=true;};return r;},btnTrack:function(fi,i){if(i==0){fi._$btnR.removeClass("fi_btn_off").addClass("fi_btn_on");fi._$btnL.removeClass("fi_btn_on").addClass("fi_btn_off");}else if(i==(fi._tabNum-1)){fi._$btnL.removeClass("fi_btn_off").addClass("fi_btn_on");fi._$btnR.removeClass("fi_btn_on").addClass("fi_btn_off");}else{fi._$btnL.removeClass("fi_btn_off").addClass("fi_btn_on");fi._$btnR.removeClass("fi_btn_off").addClass("fi_btn_on");};},setTab:function(fi,i,cbk){if(fi._$curImg){fi._$curImg.stop(true,true).animate({opacity:fi._cfg.opacity||0.5},200);};fi._$curTab=fi._$tabs.removeClass("now").eq(i).addClass("now");fi._$curImg=fi._$curTab.find("img").stop(true,true).animate({opacity:1},200,cbk);this.roll(fi,i);fi._curLink=fi._$curTab.find("a").attr("href");fi._$img.attr("src",fi._$curImg.attr("src")).css("opacity",0).stop(true,true).animate({opacity:1},200);},alt:function(fi,i,cbk){this.setTab(fi,i,cbk);if(fi._tabNum<=fi._cfg.displayNum)return false;this.btnTrack(fi,i);var offset=this.tabOffset(fi,i);if(offset.visible)return false;fi._$list.stop(true,true).animate({left:(offset.val<=0?"+=":"-=")+fi.ptStepX},200);return false;}});