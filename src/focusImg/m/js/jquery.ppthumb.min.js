;(function($){var p={};p.M=function($t,opts){this._o=opts;this.$l=$t;this.$items=$t.find(".lv_item");this.$oddItems=this.$items.filter(":odd");this.$evenItems=this.$items.filter(":even");this.imiddle=this.$items.length/2;this.$hot=null;this._i();};p.M.prototype={_i:function(){var _this=this;this.$items.each(function(i,o){if(i%2==0){$(o).css({left:(i/2)*_this._o.w,top:0});}else{$(o).css({top:_this._o.h,left:(i-1)/2*_this._o.w});};});this.b();this.$items.filter(".lv_init").trigger("mouseenter");this.$l.find(".lv_ovl").css("opacity",this._o.opacityOvl);},b:function(){var _this=this;this.$items.bind("mouseenter",function(e){_this.z($(this));}).bind("evtReset",function(e){_this.r($(this));});},ub:function(){this.$items.unbind("mouseenter").unbind("evtReset");},z:function($t){if($t.hasClass("lv_zoom"))return;var _this=this,$hot=this.$hot;if($hot){$hot.trigger("evtReset");};this.$hot=$t;var i0=$t.index(),even=(i0%2==0),toLeft=(i0>=_this.imiddle);this.ub();this._zIn($t.addClass("lv_zoom"),even,toLeft);this.$items.each(function(i,o){if(i==i0)return true;if(toLeft){_this._goL($(o),even,i,i0);}else{_this._goR($(o),even,i,i0);};});},_zIn:function($t,even,toLeft){var _this=this;$t.stop(true,true);$t.find("img").stop(true,true).animate({width:this._o.w*2-this._o.gapH*2,height:this._o.h*2-this._o.gapV*2},this._o.speed,function(){$t.find(".lv_cover").show();_this.b();});if(even){if(toLeft){$t.animate({left:'-='+this._o.w},this._o.speed);};}else{if(toLeft){$t.animate({top:0,left:"-="+this._o.w},this._o.speed);}else{$t.animate({top:"-="+this._o.h},this._o.speed);};};},r:function($t){var _this=this,sp=0;var i0=$t.index(),even=(i0%2==0),toLeft=(i0>=this.imiddle),tempObj;$t.removeClass("lv_zoom").find("img").stop(true,true).animate({width:this._o.w-this._o.gapH*2,height:this._o.h-this._o.gapV*2},sp);$t.find(".lv_cover").hide();this.$items.stop(true,true);if(even){if(toLeft){this.$evenItems.each(function(i,o){i=(tempObj=$(o)).index();if(i>=i0)return true;tempObj.animate({left:"+="+_this._o.w},sp);});this.$oddItems.each(function(i,o){i=(tempObj=$(o)).index();if(i>(i0+1))return true;tempObj.animate({left:"+="+_this._o.w*2},sp);});$t.animate({left:"+="+this._o.w},sp);}else{this.$evenItems.each(function(i,o){i=(tempObj=$(o)).index();if(i<=i0)return true;tempObj.animate({left:"-="+_this._o.w},sp);});this.$oddItems.each(function(i,o){i=(tempObj=$(o)).index();if(i<=i0)return true;tempObj.animate({left:"-="+_this._o.w*2},sp);});};}else{if(toLeft){this.$evenItems.each(function(i,o){i=(tempObj=$(o)).index();if(i>=i0)return true;tempObj.animate({left:"+="+_this._o.w*2},sp);});this.$oddItems.each(function(i,o){i=(tempObj=$(o)).index();if(i>=i0)return true;tempObj.animate({left:"+="+_this._o.w},sp);});$t.animate({left:"+="+_this._o.w,top:"+="+_this._o.h},sp);}else{this.$evenItems.each(function(i,o){i=(tempObj=$(o)).index();if(i<(i0-1))return true;tempObj.animate({left:"-="+_this._o.w*2},sp);});this.$oddItems.each(function(i,o){i=(tempObj=$(o)).index();if(i<=i0)return true;tempObj.animate({left:"-="+_this._o.w},sp);});$t.animate({top:"+="+this._o.h},sp);};};},_goL:function($t,even,i,i0){if(even&&i>(i0+1))return;if((!even)&&i>i0)return;$t.stop(true,true);if(i%2==0){$t.animate({left:"-="+this._o.w*(even?1:2)},this._o.speed);}else{$t.animate({left:"-="+this._o.w*(even?2:1)},this._o.speed);};},_goR:function($t,even,i,i0){if(even&&i<i0)return;if((!even)&&i<(i0-1))return;$t.stop(true,true);if(i%2==0){$t.animate({left:"+="+this._o.w*(even?1:2)},this._o.speed);}else{$t.animate({left:"+="+this._o.w*(even?2:1)},this._o.speed);};}};$.fn.ppthumb=function(opts){opts=$.extend({},$.fn.ppthumb.defaults,opts);return this.each(function(){new p.M($(this),opts);});};$.fn.ppthumb.defaults={w:140,h:190,gapV:5,gapH:5,opacityOvl:0.7,speed:400};})(jQuery);