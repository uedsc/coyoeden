<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>搜狐网站</title>
<link type="text/css" rel="stylesheet" href="http://css.sohu.com/upload/global1.3.css" />
<script type="text/javascript" src=" http://js.sohu.com/library/jquery1.4.2.js"></script> 
</head>
<body>

<style>
body{background:#333}
</style>

<style type="text/css">
/*公益*/
#FocusImage_1{width:642px;height:260px;position:relative;overflow:hidden}
#FocusImage_1 .content{width:456px;height:260px;float:right;position:relative;cursor:pointer}
#FocusImage_1 .content .transparence{height:40px;width:100%;background:#000;left:0;bottom:-40px;position:absolute}
#FocusImage_1 .content h2{left:0;bottom:16px;position:absolute;padding-left:12px;font:600 14px/16px '宋体';color:#fff}
#FocusImage_1 .tab{width:192px;position:absolute;top:0;left:0}
#FocusImage_1 .tab dd{float:left;height:65px;width:192px;background:url(images/MDC_Focus_bg01.gif) no-repeat 0 -65px;cursor:pointer}
#FocusImage_1 .tab dd img{float:left;margin:3px 8px 0 4px}
#FocusImage_1 .tab dd p{font:12px/16px '宋体';color:#999;margin:15px auto 0;width:86px;float:left}
#FocusImage_1 .tab dd.now{background:url(images/MDC_Focus_bg01.gif) no-repeat top!important}
#FocusImage_1 .tab dd.now p{color:#fff}
#FocusImage_1 .tab dd.hover{background:url(images/MDC_Focus_bg01.gif) no-repeat bottom}
</style>

<script type="text/javascript">
var MDC_FocusImage=function(){
	var FocusImage=arguments[0];
	this.id=jQuery(FocusImage.id);	
	this.bigImgW=parseInt(FocusImage.bigImgW);
	this.bigImgH=parseInt(FocusImage.bigImgH);
	this.shrinkImgW=parseInt(FocusImage.shrinkImgW);
	this.shrinkImgH=parseInt(FocusImage.shrinkImgH);
	this.focusImageW=parseInt(FocusImage.focusImageW);
	this.focusImageH=parseInt(FocusImage.focusImageH);
	this.speed=parseInt(FocusImage.speed)||5000;
	this.focusData=arguments;
	this.autoPlay;
	this.type=FocusImage.type;		
};
MDC_FocusImage.prototype={
	/**
		初始化(init):
			1、根据类型创建焦点图框架;
			2、并数据回填到结构中.
	*/
	init:function(){
		var that=this;
		
		//创建框架
		that.id.css("width",this.focusImageW).append(
			jQuery("<div>",{
				id:"FocusImage_"+this.type,
				css:{
					width:this.focusImageW,
					height:this.focusImageH
				}
			}).append(
				jQuery("<div>",{
					className:"content"					
				}).append(
					jQuery("<img>",{
						width:this.bigImgW,
						height:this.bigImgH
					})					
				).append(
					jQuery("<div>",{
						className:"transparence",
						css:{
							opacity:0.5
						}
					})
				).append(							
					jQuery("<h2>")								
				)
			).append(
				jQuery("<div>",{
					className:"tab"
				}).append("<dl>")
			)
		);
		
		//根据数据创建tab标签
		for(var i=1;i<that.focusData.length;i++){
			that.id.find(".tab dl").append(
				jQuery("<dd>").append(
					jQuery("<img>",{
						width:that.shrinkImgW,
						height:that.shrinkImgH,
						src:that.focusData[i][3]||that.focusData[i][0]
					})
				).append(					
					jQuery("<p>",{
						text:that.focusData[i][2]
					})
				)
			)
		};
				
		//执行触发
		this.spring();
	},
	/**
		触发(spring):
			1、tab切换事件的绑定;
			2、计时器轮刷的实现.
	*/
	spring:function(){
		var that=this,_tab=that.id.find(".tab dd");
		
		//执行交互并轮刷
		var gogo=function(i){
			var _index=i||1;
			that.alternation(_index);
			that.autoPlay=setInterval(function(){
				that.alternation(_index==that.focusData.length-1?_index=1:++_index);
			},that.speed);
		};
		gogo();
		
		//给tab标签绑定Click事件,用于焦点图切换
		_tab.each(function(i){
			(function(i){
				_tab.eq(i).click(function(){
					if(jQuery(this)[0].className!="now"){
						clearTimeout(that.autoPlay);
						gogo(i+1)
					}
				})
			})(i)
		});
		
		_tab.mouseenter(function(){
			jQuery(this).addClass("hover")
		});
		_tab.mouseleave(function(){
			jQuery(this).removeClass("hover")
		})
		
		//给焦点区绑定Click事件,用于弹出链接
		this.id.find(".content").click(function(){
			window.open(that.id.find("img:eq(0)").attr("link"));
		})
	},
	/**
		交互(alternation):
			1、根据类型选择对应的过场动画;
			2、数据切换的实现.
	*/
	alternation:function(i){	
		var that=this;		
		//标签切换交互
		that.id.find(".tab dd.now").removeClass("now");
		that.id.find(".tab dd").eq(i-1).addClass("now");
		
		//透明条动画,标题同步骤
		
		that.id.find(".transparence").css({
			bottom:-40
		}).stop().animate({"bottom":0},200);	
					
		that.id.find("h2").css({
			bottom:-24
		}).stop().animate({"bottom":16},200);	
		
		//回填大图路径及绑定链接路径,并给大图加渐显动画
		that.id.find("img:eq(0)").attr({
			"src":that.focusData[i][0],
			"link":that.focusData[i][1]
		}).css({
			display:"block",
			opacity:0
		}).stop().animate({opacity:1},300);
		
		//数据回填
		this.id.find("h2").html(that.focusData[i][2]);
		this.id.find("p").html(that.focusData[i][3]);
	}
}
</script>

<br /><br />

<h1>公益  http://yule.sohu.com/gongyi/</h1>
<div id="MDC_FocusImage_1"></div>
<script type="text/javascript">
var MDC_FocusImage_1=new MDC_FocusImage({
id:"#MDC_FocusImage_1",//#号开头的ID
type:"1",//类型1=公益
bigImgW:"456",//大图片宽
bigImgH:"260",//大图片高
focusImageW:"642",//焦点图宽
focusImageH:"260",//焦点图高
shrinkImgW:"73",//缩略图宽
shrinkImgH:"58",//缩略图高
speed:"3000"//轮刷速度,单位微秒,不填默认为5000微秒(5秒)
},
[	//数据1
	"http://i0.itc.cn/20100715/5e2_6dfb4f8f_4e38_4b97_a2a7_57673562f6b4_0.jpg",
	"http://pic.yule.sohu.com/group-222940.shtml",
	"11曾志伟拍贺岁片改喜剧宣扬爱"
],
[	//数据2
	"http://i1.itc.cn/20100714/62d_f2014f45_3dc0_4d95_ad1b_a29f3e708071_0.jpg",
	"http://yule.sohu.com/s2010/6765/s273502153/index.shtml",
	"22曾志伟拍贺岁片改喜剧宣扬爱"
],
[	//数据3
	"http://i1.itc.cn/20100715/5e2_7b4a6f48_ae26_4c03_9a9b_9d9f2efeb94f_0.jpg",
	"http://yule.sohu.com/20100715/n273517449.shtml",
	"33曾志伟拍贺岁片改喜剧宣扬爱"
],
[   //数据4
	"http://photocdn.sohu.com/focusUp/20100806/084052312672287796.jpg",
	"http://pic.yule.sohu.com/group-222951.shtml#g=222951&p=1993593",
	"44曾志伟拍贺岁片改喜剧宣扬爱"
]);
MDC_FocusImage_1.init();
</script>
</body>
</html>