<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
		<title>Demo-Ingenious JQuery custom event,精妙的自定义事件</title>
		<link rel="stylesheet" type="text/css" href="http://vivasky.com/labs/demo/css/colorpicker.css"></link>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="http://files.cnblogs.com/mamboer/colorpicker.js"></script> 
		<style id="css" type="text/css">
			#A{background:#eee;width:90%;border:none;}
		</style>  
	</head>
	<body>
		<h1>Demo-Ingenious JQuery custom event</h1>
		<h2>JQuery最佳实践-精妙的自定义事件</h2>
		<p><strong>问题</strong>：一个复选框X，你如何便捷地触发它的click事件的处理逻辑，但是又不改变它当前的选中状态？</p>
		<p><strong>答案</strong>:用自定义事件处理函数封装复选框click事件的处理逻辑！然后触发该自定义事件。</p>
		<blockquote>
			<h3>以下应用场景你曾经遇到过么？</h3>
			<p>
				需求：某个容器A，用户可以设置它的4条边框的有无以及边框色？“边框的有无”和“颜色的变化”需要联动，<br/>
				就是说改变边框的时候获取当前设定的颜色，改变颜色的时候获取当前设定的边框，并及时反映到容器A上。
			</p>
			<em>注：本例子边框颜色统一设置,分别设置的例子大家可以去写下～</em>
		</blockquote>
		<hr/>
		<div id="demo">
			<div class="acts">
				<label for="txtCpk"></label>边框设置：<input type="text" size="10" id="txtCpk" name="color"/>
				<input type="checkbox" name="bd" value="top"/><span>上</span>
				<input type="checkbox" name="bd" value="right"/><span>右</span>
				<input type="checkbox" name="bd" value="bottom"/><span>下</span>
				<input type="checkbox" name="bd" value="left"/><span>左</span>
			</div>
			<textarea id="A" cols="100" rows="29"></textarea>
		</div>
 
	</body>
	<script id="js" type="text/javascript">
	//<![CDATA[
	//目标容器A
	var $a=$("#A");
	//拾色器
	var $txtColor=$("#txtCpk").ColorPicker({
		onChange:function(hsb,hex,rgb){
			$txtColor.val("#"+hex).css("backgroundColor","#"+hex);
			//联动边框-触发自定义事件"evtClick"，避免改变复选框的状态
			//这里可不能直接用$bd.trigger("click")噢;
			//$bd.trigger("click");
			$bd.trigger("evtClick");
		}
	});
	//边框及自定义事件的应用
	var $bd=$("#demo input[type='checkbox']").bind("evtClick",function(evt){
		var c=this.checked?"2px solid "+$txtColor.val():"none";
		$a.css("border-"+this.value,c);
	}).click(function(evt){
		$(this).trigger("evtClick");
	});
	
	//show the js
	$(document).ready(function(){
		$a.val($("#js").html());
	});
	
	//]]>
	</script>
</html>
