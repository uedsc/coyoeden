String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gi,"")};window.StringBuilder=function(A){this.strings=[];if(typeof A=="string"){this.strings.push(A)}};StringBuilder.prototype={append:function(B){var A=this;A.strings.push(B);return A},toString:function(){return this.strings.join("")}};if(typeof $=="undefined"){window.$=function(A){if(typeof A=="string"){return document.getElementById(A)}}}function fnCreateElement(A){var H=A.root||null,D=A.nodeType||null,F=A.className||null,B=A.id,C=A.cssText||null,G=A.att||null,I=A.success||null;if(D&&H){var E=document.createElement(D);if(F){E.className=F}if(B){E.id=B}if(C){E.style.cssText=C}if(G){for(a in G){if(a=="class"||a=="style"){continue}E.setAttribute(a,G[a])}}if(D.toLowerCase()=="script"||D.toLowerCase()=="iframe"){E.onload=E.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(I){I()}}}}else{if(I){I()}}H.appendChild(E);return E}else{return null}}function faceOver(B){var A=$("facePB").getElementsByTagName("img");for(var C=0;C<A.length;C++){if(B==C){A[B].src=MOOD.imgUrl+"2"+(B+1)+".gif";A[B].style.width="32px";A[B].style.height="32px"}}}function faceOut(B){var A=$("facePB").getElementsByTagName("img");for(var C=0;C<A.length;C++){A[C].src=MOOD.imgUrl+"0"+(C+1)+".gif";A[C].style.width="30px";A[C].style.height="30px"}}function animate(num){var obj=eval("productJSON_"+MOOD.topicId),total=obj["votecount_135"];if(parseInt(obj["checkitem_"+num]/total*43)==0){return }if(parseInt($("height_"+num).style.height)!=parseInt(obj["checkitem_"+num]/total*43)){$("height_"+num).style.height=(parseInt($("height_"+num).style.height)+1)+"px";window.setTimeout("animate("+num+")",10)}}function faceChange(num){try{var str="",n="",facePB=$("facePB"),lis=facePB.getElementsByTagName("li");var faceId,topicId=MOOD.topicId,domain=MOOD.domain;switch(num){case 0:faceId=1291;break;case 1:faceId=1292;break;case 2:faceId=1293;break;case 3:faceId=1294;break;case 4:faceId=1295;break;case 5:faceId=1296;break}$("facePB").style.position="relative";$("facePB").innerHTML+="<div style=\"width:522px;height:82px;position:absolute;top:0;left:0;z-index:2000;background:#fff;filter:alpha(opacity=0),MozOpacity:0;opacity:0\">&nbsp;</div>";var div=fnCreateElement({root:document.getElementsByTagName("body")[0],nodeType:"div",cssText:"display:none"});div.innerHTML="<iframe name=\"faceTarget\"></iframe><form id=\"faceTaget\" method=\"post\" target=\"faceTarget\" action=\"http://mood.news.sohu.com/answer.jhtm?voteId=135&listAnswer[0].questionId=298&listAnswer[0].checkitemId="+faceId+"&subType="+domain+"&subId="+topicId+"\"></form>";for(var j=0;j<lis.length;j++){if(num==j){lis[num].className="visited";add(lis[num],num)}}var faceBP=window.setInterval(function(){facePlan()},1000);var i=0;function facePlan(){if($("cj")==null&&faceBP){clearInterval(faceBP);var buffer=new stringBuffer(),faces=MOOD.faces,faceIds=[1291,1292,1293,1294,1295,1296];for(var i=0;i<lis.length;i++){var img=faces[i].split("|")[0],desc=faces[i].split("|")[1];n=i==num?" class=\"now\"":"";buffer.append("<li"+n+"><span id=\"num_"+faceIds[i]+"\" class=\"num\">"+(faceIds[i]==faceId?1:0)+"</span><span class=\"plan\"><img id=\"height_"+faceIds[i]+"\" src=\"http://comment.news.sohu.com/upload/mood20100518/images/face_plan.gif\" width=\"12\" style=\"height:0px;overflow:hidden\" alt=\"\" /></span><span class=\"face\"><img width=\"24\" src=\""+img.replace("i0","i1")+"\"/>"+desc+"</span></li>")}str=buffer.toString();if(str){facePB.innerHTML="<ul class=\"faceBack clear\">"+str+"</ul>"}fnCreateElement({root:document.getElementsByTagName("head")[0],nodeType:"script",att:{type:"text/javascript",src:"http://mood.news.sohu.com/count_v135_t"+domain+"_i"+topicId+"_b_c_qc.json?"+new Date().getTime()},success:function(){var obj=eval("productJSON_"+topicId),total=obj["votecount_135"];for(var i=0;i<faceIds.length;i++){var num=faceIds[i];$("num_"+num).innerHTML=obj["checkitem_"+num];if(num==faceId){$("num_"+num).innerHTML=parseInt(obj["checkitem_"+num])+1}if(total!=0){animate(num)}}$("faceTaget").submit()}});fnCreateElement({root:document.getElementsByTagName("head")[0],nodeType:"script",att:{type:"text/javascript",src:"http://mood.news.sohu.com/frag/inc/mood/"+domain+"/top5_"+faceId+".inc?"+new Date().getTime()},success:function(){if(returnMood.length>0){var str=new stringBuffer();$("faceIcon").innerHTML="<img style=\"height:24px;width:24px\" src=\""+MOOD.faces[num].split("|")[0]+"\"/>"+MOOD.faces[num].split("|")[1];for(var i=0;i<returnMood.length;i++){var data=returnMood[i];str.append("<li><span>"+(i+1)+"</span><a target=\"_blank\" href=\""+unescape(data.url)+"\">"+unescape(data.title)+"</a></li>")}$("faceList").getElementsByTagName("ul")[0].innerHTML=str;$("faceList").style.display="";returnMood=null}}})}}}catch(e){}}function add(C,A){if($("cj")){clearElement("cj");window.clearTimeout(cart)}C.parentNode.style.position="relative";var B=createElement("span",{id:"cj"},{top:"40px",left:(87*A+56)+"px"},"","+ 1");C.parentNode.appendChild(B);if(browser["msie"]){$("cj").filters.alpha.opacity=100}else{$("cj").style.MozOpacity=1}cartoon("cj")}var cartoon=function(A){if($(A).style.top!="5px"){$(A).style.top=parseInt($(A).style.top)-5+"px";cart=window.setTimeout("cartoon('"+A+"')",10)}else{var C="undefined"==typeof n?20:n;var B=C/100;if(browser["msie"]){if($(A).filters.alpha.opacity>0){$(A).filters.alpha.opacity=$(A).filters.alpha.opacity-C;cart=window.setTimeout("cartoon('"+A+"')",100)}else{clearElement(A)}}else{if($(A).style.MozOpacity>0){$(A).style.MozOpacity=$(A).style.MozOpacity-B;cart=window.setTimeout("cartoon('"+A+"')",100)}else{clearElement(A)}}}};if(typeof MOOD=="undefined"){var MOOD={topicId:null,domain:null,faces:[],imgUrl:"http://comment.news.sohu.com/upload/mood20100518/images/i",init:function(B){var E=B.showFace,C=B.theme,D=B.close||false,A=B.cssFile||"http://comment.news.sohu.com/upload/mood20100518/face.css";if(!D){this.topicId=B.topicId,this.domain=B.domain,fnCreateElement({root:document.getElementsByTagName("head")[0],nodeType:"link",att:{rel:"stylesheet",type:"text/css",href:A},success:function(){MOOD.initVote(E,C)}})}},initVote:function(F,C){var E=new StringBuilder();if(C==1){this.faces=["http://comment.news.sohu.com/upload/mood20100518/images/i01.gif|\u9ad8\u5174","http://comment.news.sohu.com/upload/mood20100518/images/i02.gif|\u96be\u8fc7","http://comment.news.sohu.com/upload/mood20100518/images/i03.gif|\u611f\u52a8","http://comment.news.sohu.com/upload/mood20100518/images/i04.gif|\u6124\u6012","http://comment.news.sohu.com/upload/mood20100518/images/i05.gif|\u641e\u7b11","http://comment.news.sohu.com/upload/mood20100518/images/i06.gif|\u65e0\u804a"]}else{if(C==2){}else{if(C==3){}else{this.faces=C}}}this.imgUrl=this.faces[0].replace(/\d{2}\..+/,"");E.append("<h2><span>\u65b0\u95fb\u8868\u60c5</span></h2><div id=\"facePB\" class=\"clear\"><ul class=\"facePre clear\">");for(var B=0;B<this.faces.length;B++){var A=this.faces[B].split("|")[0],D=this.faces[B].split("|")[1];E.append("<li><a onmouseover=\"faceOver("+B+")\" onmouseout=\"faceOut("+B+")\" href=\"javascript:faceChange("+B+")\"><img src=\""+A+"\" width=\"30\" height=\"30\"/>"+D+"</a></li>")}E.append("</ul></div><div class=\"faceRank clear\"><div class=\"faceList\" id=\"faceList\" style=\"display:none\"><h3><span id=\"faceIcon\"></span>\u6587\u7ae0\u6392\u884c</h3><ul></ul></div><div class=\"faceMore\" id=\"faceMore\" style=\"display:none\"><a href=\"#\" target=\"_blank\">\u67e5\u770b\u8868\u60c5\u6392\u884c\u699c</a></div></div>");$(F).innerHTML=E.toString()}}}
