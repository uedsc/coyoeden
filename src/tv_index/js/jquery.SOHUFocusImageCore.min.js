;(function($){var p={cache:{}};p.M=function(cfg){this.$d=cfg.$d;this.flag=cfg.flag;this.id=this.$d[0].id;this.text=cfg.text||true;this.speed=parseInt(cfg.speed)||5000;this.hoverStop=cfg.hoverStop;this.type=cfg.type||1;this.place=cfg.place||'fi_tabRB';this.myHtml=cfg.myHtml||"";this.ptStepX=cfg.ptStepX||92;this.ptStepY=cfg.ptStepY||81;this.ptStepX_=cfg.ptStepX_||4;this.ptStepY_=cfg.ptStepY_||-1;this.clickTabToNav=cfg.clickTabToNav||false;this.autoPlay=null;this.autoPlay1=null;this._fiObj=null;this._$tabC=null;this._$tabs=null;this._$curTab=null;this._$titleC=null;this._$img=null;this._$transparentOvl=null;this._$desc=null;this._$pointer=null;this._cfg=cfg;this._curLink=null;this._$curImg=null;this._tabNum=0;this.$d.data("apple",{a:cfg});this.init();};p.M.prototype={init:function(){this._fiObj=p.cache[this.flag];if(!this._fiObj)return;this._fiObj.init(this);this.$d.find(".fi_ct").append(this.myHtml);this.spring();},spring:function(){var that=this;var gogo=function(i){var _index=i||0;that.alternation(_index);that.autoPlay=setInterval(function(){that.alternation((++_index)==that._tabNum?_index=0:_index);},that.speed);};gogo();this._$tabs.each(function(i){(function(i,o){o=jQuery(o).click(function(){if(this.className!="now"){clearTimeout(that.autoPlay1);clearInterval(that.autoPlay);gogo(i);};if(that.clickTabToNav){window.open(fi._curLink);};return false;});if(that.hoverStop){o.mouseenter(function(){clearInterval(that.autoPlay);clearTimeout(that.autoPlay1);if(this.className!="now"){that.alternation(i);};return false;}).mouseleave(function(){clearInterval(that.autoPlay);clearTimeout(that.autoPlay1);var j=(i+1)==that._tabNum?0:(i+1);that.autoPlay1=window.setTimeout(function(){gogo(j);},that.speed);});};})(i,this)});if(this._fiObj.initEvts){this._fiObj.initEvts(this,gogo);};},alternation:function(i){var continueCommon=true;if(this._fiObj.alt)continueCommon=this._fiObj.alt(this,i);if(!continueCommon)return;this._$img.attr("src",this._$curTab.find("img").attr("src")).css({opacity:0}).stop().animate({opacity:1},500);this._$tabs.filter(".now").removeClass().end().eq(i).addClass("now");}};$.fn.focusImg=function(cfg){return this.each(function(){cfg.$d=$(this);new p.M(cfg);});};$.fn.focusImg.Register=function(key,fiObj){p.cache[key]=fiObj;};})(jQuery);
